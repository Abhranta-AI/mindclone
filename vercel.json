{
  "functions": {
    "api/**/*.js": {
      "maxDuration": 60
    }
  },
  "crons": [
    {
      "path": "/api/cron/news-curator",
      "schedule": "0 */6 * * *"
    },
    {
      "path": "/api/cron/moltbook-heartbeat",
      "schedule": "*/5 * * * *"
    },
    {
      "path": "/api/cron/matching-heartbeat",
      "schedule": "*/30 * * * *"
    },
    {
      "path": "/api/cron/dmn-heartbeat",
      "schedule": "0 */6 * * *"
    }
  ],
  "routes": [
    {
      "src": "^/api/billing/status$",
      "dest": "/api/billing/status.js"
    },
    {
      "src": "^/api/billing/create-checkout$",
      "dest": "/api/billing/create-checkout.js"
    },
    {
      "src": "^/api/billing/create-portal$",
      "dest": "/api/billing/create-portal.js"
    },
    {
      "src": "^/api/stripe-webhook$",
      "dest": "/api/stripe-webhook.js"
    },
    {
      "src": "^/api/admin/grandfather-users$",
      "dest": "/api/admin/grandfather-users.js"
    },
    {
      "src": "^/api/chat$",
      "dest": "/api/chat.js"
    },
    {
      "src": "^/api/get-image$",
      "dest": "/api/get-image.js"
    },
    {
      "src": "^/api/chat-public$",
      "dest": "/api/chat-public.js"
    },
    {
      "src": "^/api/username/check$",
      "dest": "/api/username.js?action=check"
    },
    {
      "src": "^/api/username/claim$",
      "dest": "/api/username.js?action=claim"
    },
    {
      "src": "^/api/username/release$",
      "dest": "/api/username.js?action=release"
    },
    {
      "src": "^/api/username/assign-temp$",
      "dest": "/api/username.js?action=assign-temp"
    },
    {
      "src": "^/api/username$",
      "dest": "/api/username.js"
    },
    {
      "src": "^/api/profile$",
      "dest": "/api/profile.js"
    },
    {
      "src": "^/api/link-settings$",
      "dest": "/api/link-settings.js"
    },
    {
      "src": "^/api/link/settings$",
      "dest": "/api/link-settings.js"
    },
    {
      "src": "^/api/analytics$",
      "dest": "/api/analytics.js"
    },
    {
      "src": "^/api/activity$",
      "dest": "/api/activity.js"
    },
    {
      "src": "^/api/messages/mark-public$",
      "dest": "/api/messages/mark-public.js"
    },
    {
      "src": "^/api/upload-kb$",
      "dest": "/api/upload-kb.js"
    },
    {
      "src": "^/settings$",
      "dest": "/settings.html"
    },
    {
      "src": "^/repair$",
      "dest": "/repair.html"
    },
    {
      "src": "^/discover$",
      "dest": "/discover.html"
    },
    {
      "src": "^/api/discover$",
      "dest": "/api/discover.js"
    },
    {
      "src": "^/matching$",
      "dest": "/matching.html"
    },
    {
      "src": "^/api/matching/preferences$",
      "dest": "/api/matching/preferences.js"
    },
    {
      "src": "^/api/matching/matches$",
      "dest": "/api/matching/matches.js"
    },
    {
      "src": "^/api/matching/conversation$",
      "dest": "/api/matching/conversation.js"
    },
    {
      "src": "^/([a-z][a-z0-9_]{2,19})$",
      "dest": "/link.html?username=$1"
    },
    {
      "src": "^/$",
      "dest": "/index.html"
    }
  ]
}


